# 功能模块设计文档

## 1. 概述

本文档详细描述个人网站项目的功能模块设计，包括前端界面模块、后端功能模块、用户系统模块等。文档基于项目需求分析，定义了各个功能模块的具体实现方式和交互流程。

## 2. 前端界面模块

### 2.1 首页模块

#### 2.1.1 功能描述

首页是网站的入口，展示网站主要内容概览，包括最新博客、精选作品、个人简介等信息。

#### 2.1.2 页面结构

- **顶部导航栏**：Logo、导航菜单、搜索框、用户登录/注册入口
- **Banner区域**：个人简介、技术栈、主要功能入口
- **最新博客列表**：展示最新发布的博客文章，包含标题、摘要、封面、阅读量等信息
- **精选作品展示**：以卡片形式展示近期作品，包含标题、描述、缩略图、链接等
- **关于我**：个人简介、技能标签、联系方式
- **底部区域**：版权信息、社交媒体链接、备案信息

#### 2.1.3 交互功能

- 博客文章点击跳转详情页
- 作品卡片点击跳转作品详情页
- 导航菜单切换不同页面
- 搜索框输入关键词进行内容搜索
- 响应式设计，适配不同设备屏幕

#### 2.1.4 核心功能

- 数据聚合展示：整合博客、作品等不同模块的最新内容
- 内容预览：提供博客和作品的摘要信息
- 快速导航：通过导航菜单快速访问各功能模块
- 搜索入口：提供全站内容搜索功能

### 2.2 博客页面模块

#### 2.2.1 功能描述

博客页面用于展示和管理个人博客文章，支持分类浏览、标签筛选、搜索等功能。

#### 2.2.2 页面结构

- **博客列表页**：
  - 筛选条件：分类下拉框、标签云、状态选择
  - 排序选项：按发布时间、阅读量、评论数排序
  - 博客卡片列表：包含标题、摘要、封面、分类、标签、阅读量、评论数、发布时间等信息
  - 分页组件：支持翻页功能

- **博客详情页**：
  - 文章头部：标题、作者信息、发布时间、阅读量、评论数
  - 文章内容：富文本展示，支持代码高亮、图片、表格等
  - 文章底部：标签、分类、分享按钮、相关推荐
  - 评论区：评论列表、评论输入框、回复功能

#### 2.2.3 交互功能

- 分类和标签筛选：选择后自动更新列表
- 排序方式切换：实时更新排序结果
- 分页导航：切换不同页码查看内容
- 评论功能：发表评论、回复评论
- 分享功能：分享到社交媒体平台
- 代码高亮：支持多种编程语言的代码高亮显示

#### 2.2.4 核心功能

- 博客文章的展示与浏览
- 文章分类与标签系统
- 评论系统
- 内容分享
- 相关文章推荐

### 2.3 作品页面模块

#### 2.3.1 功能描述

作品页面用于展示个人项目和作品，支持项目详情查看、源代码链接访问等功能。

#### 2.3.2 页面结构

- **作品列表页**：
  - 作品网格布局：以卡片形式展示，包含封面图、标题、简短描述
  - 筛选功能：按分类筛选作品
  - 查看更多按钮：加载更多作品

- **作品详情页**：
  - 作品头部：项目名称、分类、发布时间
  - 图片展示区：多图片轮播或网格展示
  - 项目描述：详细介绍项目背景、功能、技术栈等
  - 链接区域：提供项目演示链接、GitHub链接等
  - 相关作品推荐

#### 2.3.3 交互功能

- 作品卡片悬停效果
- 图片点击放大预览
- 外部链接跳转
- 分类筛选
- 作品分享

#### 2.3.4 核心功能

- 作品展示与浏览
- 项目详情介绍
- 外部链接集成
- 作品分类管理

### 2.4 笔记页面模块

#### 2.4.1 功能描述

笔记页面用于记录和分享个人学习笔记、技术心得等内容，支持富文本编辑和脑图功能。

#### 2.4.2 页面结构

- **笔记列表页**：
  - 笔记卡片列表：标题、摘要、创建时间、是否公开
  - 筛选功能：按公开/私有、创建时间筛选
  - 搜索功能：搜索笔记内容

- **笔记详情页**：
  - 笔记头部：标题、作者、创建时间、更新时间
  - 笔记内容：富文本展示
  - 关联脑图：如果有关联脑图，提供脑图查看入口
  - 评论区：支持评论交流

- **脑图展示区**：
  - 脑图可视化界面：支持放大、缩小、拖动
  - 节点交互：点击节点查看详情，支持展开/收起
  - 与笔记关联：点击笔记节点可查看关联笔记内容

#### 2.4.3 交互功能

- 笔记内容查看
- 脑图交互操作
- 评论功能
- 笔记搜索
- 脑图节点展开/收起

#### 2.4.4 核心功能

- 笔记的展示与浏览
- 脑图可视化
- 笔记与脑图关联
- 评论交流

### 2.5 联系页面模块

#### 2.5.1 功能描述

联系页面提供访问者与网站所有者进行沟通的渠道，包括联系表单、社交媒体链接等。

#### 2.5.2 页面结构

- **联系方式**：邮箱、社交媒体账号等
- **联系表单**：姓名、邮箱、主题、留言内容输入框、提交按钮
- **常见问题**：FAQ部分，解答常见疑问
- **隐私政策链接**

#### 2.5.3 交互功能

- 表单验证：实时验证输入内容
- 表单提交：提交后显示成功提示
- 社交媒体链接点击跳转
- 表单数据提交到后端API

#### 2.5.4 核心功能

- 联系表单提交
- 联系方式展示
- 常见问题解答
- 表单数据合法性验证

### 2.6 搜索页面模块

#### 2.6.1 功能描述

搜索页面展示全站搜索结果，支持多种内容类型的搜索和筛选。

#### 2.6.2 页面结构

- **搜索框**：顶部搜索框，可修改搜索关键词
- **结果类型筛选**：博客、作品、笔记等分类切换
- **搜索结果列表**：显示匹配的内容，包含标题、摘要、链接、类型标识
- **分页组件**：支持翻页功能

#### 2.6.3 交互功能

- 实时搜索建议
- 结果类型切换
- 排序选项
- 分页导航
- 结果高亮显示

#### 2.6.4 核心功能

- 全站内容搜索
- 搜索结果分类筛选
- 分页展示
- 关键词高亮

## 3. 用户系统模块

### 3.1 用户注册/登录模块

#### 3.1.1 功能描述

提供用户注册和登录功能，支持邮箱注册和第三方平台登录。

#### 3.1.2 实现方式

- **邮箱注册流程**：
  - 输入邮箱、用户名、密码
  - 发送验证码到邮箱
  - 验证邮箱激活账号

- **邮箱登录流程**：
  - 输入邮箱、密码
  - 可选记住登录状态
  - 登录成功后生成JWT token

- **第三方登录**：
  - 支持微信登录
  - 首次登录需绑定账号
  - 后续直接登录

#### 3.1.3 核心功能

- 用户注册与账号激活
- 用户身份认证
- JWT token生成与验证
- 第三方账号集成
- 密码重置功能

### 3.2 用户中心模块

#### 3.2.1 功能描述

用户个人中心，用于管理个人信息、查看历史记录等。

#### 3.2.2 页面结构

- **个人资料**：基本信息、头像、个人简介编辑
- **账号安全**：修改密码、绑定邮箱、绑定第三方账号
- **我的收藏**：收藏的博客、作品等
- **历史记录**：浏览历史、评论历史
- **消息通知**：系统通知、评论回复等

#### 3.2.3 交互功能

- 个人信息修改
- 密码修改
- 绑定/解绑邮箱和第三方账号
- 查看和管理收藏内容
- 查看浏览和评论历史
- 查看和管理消息通知

#### 3.2.4 核心功能

- 个人资料管理
- 账号安全设置
- 收藏管理
- 历史记录查询
- 消息通知管理

### 3.3 权限管理模块

#### 3.3.1 功能描述

管理用户权限，区分普通用户、管理员等不同角色，控制内容访问和操作权限。

#### 3.3.2 权限等级

- **公开访问**：所有访客可访问的内容
- **用户访问**：登录用户可访问的内容和功能
- **管理员访问**：管理员专属的管理功能

#### 3.3.3 权限控制范围

- 内容浏览权限
- 内容创建权限
- 内容编辑权限
- 内容删除权限
- 评论管理权限
- 系统配置权限

#### 3.3.4 核心功能

- 基于角色的权限控制
- 接口级别的权限验证
- 内容级别的权限控制
- 操作日志记录

## 4. 后台管理系统

### 4.1 概览

后台管理系统提供给管理员进行网站内容管理和系统配置的界面。

### 4.2 用户管理

#### 4.2.1 功能描述

管理网站注册用户，包括查看用户列表、修改用户信息、设置用户角色等。

#### 4.2.2 实现方式

- 用户列表展示，支持分页、搜索、筛选
- 用户详情查看和编辑
- 用户角色设置
- 禁用/启用用户账号
- 用户删除功能

### 4.3 内容管理

#### 4.3.1 功能描述

管理网站各类内容，包括博客文章、作品、笔记等的创建、编辑、发布和删除。

#### 4.3.2 实现方式

- **博客管理**：
  - 博客文章列表展示
  - 文章创建和编辑（富文本编辑器）
  - 文章分类和标签管理
  - 文章发布状态管理（草稿/已发布）

- **作品管理**：
  - 作品列表展示
  - 作品创建和编辑
  - 作品分类管理
  - 作品图片上传和管理

- **笔记管理**：
  - 笔记列表展示
  - 笔记创建和编辑
  - 笔记公开/私有设置

### 4.4 评论管理

#### 4.4.1 功能描述

管理用户评论，包括查看评论、审核评论、删除不当评论等。实现评论内容审核机制，确保评论内容的合规性。

#### 4.4.2 实现方式

- 评论列表展示，支持分页、搜索、筛选
- 评论内容查看
- 评论审核功能（通过/拒绝）
- 评论删除功能
- 回复评论功能
- 评论内容长度限制：限制1000个中文字符
- 评论状态管理：
  - 0：待审核 - 新提交的评论自动进入待审核状态
  - 1：已审核通过 - 审核通过的评论可以在前端显示
  - 2：已拒绝 - 审核不通过的评论不会在前端显示

#### 4.4.3 审核流程

1. **提交审核**：用户提交评论后，自动设置状态为"待审核"
2. **通知机制**：系统通过NewCommentListener监听器实现自动化通知：
   - 自动发送邮件通知管理员有待审核评论
   - 邮件内容包含评论ID、用户ID、文章信息、评论内容等详细信息
   - 支持通过环境变量配置管理员邮箱地址
   - 实现了异常处理机制，确保邮件发送失败不影响主流程
3. **审核操作**：管理员可以选择"通过"或"拒绝"评论
4. **状态更新**：审核后评论状态更新为"已审核通过"或"已拒绝"
5. **前端展示**：前端页面只展示状态为"已审核通过"的评论
6. **评论计数**：评论计数仅统计已审核通过的评论
7. **批量操作**：支持批量审核和批量拒绝功能

### 4.5 联系表单管理

#### 4.5.1 功能描述

管理用户提交的联系表单信息，查看留言内容并进行回复。

#### 4.5.2 实现方式

- 联系表单列表展示
- 留言详情查看
- 标记已读/未读状态
- 回复留言功能
- 留言删除功能

### 4.6 系统配置

#### 4.6.1 功能描述

管理网站系统配置，包括站点信息、SEO设置、社交媒体链接等。

#### 4.6.2 实现方式

- 站点基本信息配置（名称、描述、LOGO等）
- SEO设置（关键词、描述等）
- 社交媒体链接配置
- 邮件服务配置
- 系统缓存管理

### 4.7 数据统计

#### 4.7.1 功能描述

提供网站访问数据、用户数据、内容数据等统计信息，支持数据可视化展示。

#### 4.7.2 实现方式

- 访问量统计图表
- 用户增长趋势图表
- 内容发布统计图表
- 评论统计图表
- 数据导出功能

### 4.8 核心功能

- 用户管理与权限控制
- 内容的CRUD操作
- 评论审核和管理
- 联系表单处理
- 系统参数配置
- 数据统计与分析
- 操作日志记录

## 5. 用户行为分析模块

### 5.1 功能描述

跟踪和分析用户在网站上的行为，收集访问数据，为网站优化提供依据。

### 5.2 数据收集范围

- 页面访问记录
- 内容浏览时长
- 用户来源渠道
- 搜索关键词
- 点击行为
- 设备和浏览器信息
- 地域分布

### 5.3 分析维度

- 流量分析：总访问量、独立访客、页面浏览量
- 来源分析：搜索引擎、外部链接、直接访问
- 内容分析：热门页面、跳出率、停留时间
- 用户分析：用户画像、行为路径、转化漏斗

### 5.4 核心功能

- 数据收集与存储
- 数据清洗与处理
- 数据可视化展示
- 报表生成
- 趋势分析
- 异常行为检测

## 6. 后端API服务设计

### 6.1 API架构

采用RESTful风格设计，按功能模块划分API路由，统一响应格式。

### 6.2 核心API模块

#### 6.2.1 用户认证API

- 用户注册
- 用户登录
- 获取用户信息
- 更新用户信息
- 第三方登录
- 验证码发送
- 密码重置

#### 6.2.2 内容管理API

- 博客文章CRUD操作
- 作品CRUD操作
- 笔记CRUD操作
- 评论CRUD操作
- 分类和标签管理
- 联系表单提交处理
- 社交媒体分享配置

#### 6.2.3 脑图管理API

- 脑图根节点管理
- 脑图数据获取
- 脑图节点操作
- 笔记关联管理

#### 6.2.4 系统服务API

- 邮件发送服务
- 仪表板数据统计
- 系统配置管理
- 文件上传下载
- 缓存管理

### 6.3 技术实现

- 使用JWT进行身份认证
- RESTful API设计规范
- 统一的错误处理机制
- 数据校验和安全过滤
- API限流保护
- 日志记录

## 7. 系统集成与外部服务

### 7.1 邮件服务集成

- 支持SMTP协议发送邮件
- 支持邮件模板配置
- 支持验证码发送
- 支持订阅邮件

### 7.2 社交媒体分享集成

- 支持微信分享
- 支持微博分享
- 支持Twitter分享
- 支持Facebook分享
- 自定义分享内容

### 7.3 第三方登录集成

- 支持微信登录
- 支持OAuth2.0协议
- 账号绑定与解绑

### 7.4 数据同步与备份

- 定时数据备份
- 数据恢复机制
- 外部存储集成

## 8. 性能优化与安全

### 8.1 性能优化策略

- 前端资源压缩和CDN加速
- 后端API缓存
- 数据库索引优化
- 图片懒加载和压缩
- 代码分割和按需加载
- 服务器负载均衡

### 8.2 安全考虑

- HTTPS协议传输
- 数据加密存储
- 防XSS和CSRF攻击
- SQL注入防护
- 输入验证和过滤
- 访问权限控制
- 日志审计

## 9. 部署与运维

### 9.1 部署架构

- 容器化部署（Docker）
- 服务编排（Docker Compose）
- 反向代理（Nginx）
- 负载均衡

### 9.2 监控与告警

- 系统资源监控
- 应用性能监控
- 错误日志收集
- 自动告警机制

### 9.3 升级与维护

- 版本管理
- 数据库迁移
- 定期更新和安全补丁
- 系统健康检查