# 个人网站项目需求文档

## 1. 项目概述

### 1.1 项目目标
开发一个现代化的个人网站，包含面向公众的用户界面和后台管理系统，用于展示个人作品、博客、笔记等内容，并提供用户交互功能。

### 1.2 技术标准要求
- **严格遵循Hyperf框架标准**：所有后端代码必须符合Hyperf框架的设计规范和最佳实践
- **遵守PHP开发官方标准**：遵循PSR-1、PSR-2、PSR-4、PSR-12等PHP标准规范
- **严格遵循Next.js框架标准**：所有前端代码必须符合Next.js框架的设计规范和最佳实践
- **遵守JavaScript/TypeScript开发标准**：遵循ESLint、Prettier等代码规范工具推荐的标准
- **组件库标准**：使用符合行业标准的UI组件库，确保可访问性和响应式设计
- **代码质量要求**：代码需具备良好的可读性、可维护性和可扩展性
- **安全标准**：遵循OWASP安全编码规范，确保应用安全性

## 2. 技术架构

- **前端用户界面**：Next.js 14 (App Router)
- **后台管理系统**：hyperf-admin (Vue + Hyperf)
- **后端API服务**：Hyperf框架
- **数据库**：MySQL 8.0
- **缓存**：Redis 7
- **部署**：Docker + Docker Compose（本地开发）/ systemd（线上ECS）

## 3. 核心功能模块

### 3.1 前端用户界面

- **首页**：个人简介展示
- **博客页面**：支持分类和标签双层筛选，Markdown渲染
- **作品页面**：支持分类筛选
- **笔记页面**：以脑图形式展示，不提供传统列表
- **联系页面**：联系方式表单
- **用户系统**：注册/登录、个人资料、评论发布（会员）、RSS订阅

### 3.2 后台管理系统

基于hyperf-admin构建，包含以下功能模块：
- 仪表板：网站统计数据展示
- 用户管理：用户列表查看、权限分配、状态管理
- 博客管理：博客文章增删改查、标签管理、状态管理
- 作品管理：作品增删改查、分类管理
- 笔记管理：脑图根节点管理、节点编辑、双向链接管理
- 评论管理：评论审核、删除
- 系统配置：网站参数设置

### 3.3 后端API服务

- 用户认证API（JWT + RBAC）
- 内容管理API（博客、作品、笔记、评论、RSS）
- 脑图API（根节点管理、节点编辑、链接管理）
- 性能优化中间件（布隆过滤器、限速、日志）

## 4. 用户权限体系

- **管理员**：拥有所有权限，可以管理用户、内容、评论和系统配置
- **会员用户**：可发布评论、订阅RSS、查看公开内容、管理个人资料
- **访客用户**：仅可查看公开内容和订阅RSS

## 5. 技术特性

### 5.1 性能优化

- **协程连接池**：MySQL和Redis采用协程连接池，最大连接数20-50，避免高并发下连接数无限扩大
- **布隆过滤器**：快速过滤不存在的资源请求，减少后端处理压力
- **限速机制**：防止恶意请求和DDoS攻击，保护服务器资源
- **日志系统**：详细记录请求和响应信息，便于监控和调试

### 5.2 笔记系统特色

- 完全以脑图为核心，不提供传统列表视图
- 支持根节点列表展示（标题+脑图截图）
- 双向链接支持，实现笔记间关联
- Markdown格式存储和渲染
- 支持多个独立根节点

### 5.3 博客系统特色

- 分类和标签双层筛选机制
- 支持跨分类标签使用
- 组合筛选功能，提升用户查找效率

### 5.4 部署模式

- **本地开发**：Docker Compose编排，独立容器运行，环境配置分离
- **线上部署**：阿里云ECS单机部署，systemd管理服务启停，Nginx作为统一入口
- **配置管理**：通过环境变量分离配置，开发环境使用.env.development，生产环境使用.env.production

### 5.5 数据存储

- JWT令牌存储到Redis缓存加速响应
- MySQL和Redis采用协程连接池管理连接
- 合理的数据库表结构设计，支持业务需求

## 6. 数据库设计

### 6.1 核心数据表

- **用户表**：存储用户基本信息、角色、状态
- **博客表**：存储博客文章内容、状态、分类、标签关联
- **作品表**：存储作品信息、图片链接、项目链接、分类
- **笔记表**：存储笔记内容（Markdown格式）、公开状态
- **评论表**：存储用户评论、审核状态
- **订阅表**：存储RSS订阅信息

### 6.2 脑图相关表

- **脑图根节点表**：存储脑图根节点信息、截图路径
- **脑图节点表**：存储脑图节点信息、位置坐标
- **节点链接表**：存储节点间链接关系

### 6.3 分类标签表

- **博客分类表**：存储博客分类信息
- **博客标签表**：存储博客标签信息
- **博客标签关联表**：存储博客与标签的关联关系

## 7. API接口设计

### 7.1 用户认证接口

- 用户注册/登录接口
- JWT令牌生成与验证接口
- 用户信息获取/更新接口

### 7.2 内容管理接口

- 博客文章增删改查接口
- 作品集增删改查接口
- 笔记增删改查接口
- 评论增删改查接口
- RSS订阅接口

### 7.3 脑图管理接口

- 脑图根节点管理接口
- 脑图数据获取接口
- 节点间链接管理接口

## 8. 部署架构

### 8.1 本地开发环境

- 使用Docker Compose编排所有服务
- 每个服务独立容器运行
- 通过docker-compose.yml统一管理
- 支持开发模式热重载和自动重启

### 8.2 线上ECS部署

- 阿里云ECS单机部署模式
- 所有服务部署在同一台实例
- 通过systemd管理服务启停
- Nginx作为统一入口和反向代理
- SSL证书配置和安全加固

## 9. 性能监控与优化

### 9.1 监控指标

- 系统资源使用率（CPU、内存、磁盘）
- 数据库连接池状态
- API响应时间和错误率
- Redis缓存命中率

### 9.2 优化策略

- 连接池参数调优
- 数据库索引优化
- Redis缓存策略优化
- Nginx性能调优

## 10. 安全考虑

- JWT令牌安全存储和传输
- 用户密码加密存储
- SQL注入防护
- XSS攻击防护
- CSRF攻击防护
- 访问频率限制
- 敏感信息过滤

这个项目需求文档涵盖了现代化个人网站的所有核心功能，同时考虑了性能优化、安全性、可维护性和部署便利性。